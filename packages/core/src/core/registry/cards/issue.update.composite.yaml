capability_id: issue.update.composite
version: "1.0.0"
description: "Update issue fields, labels, assignees, and milestone in a single GraphQL batch call."
input_schema:
  type: object
  required: [issueId]
  properties:
    issueId: { type: string, minLength: 1 }
    title: { type: string }
    body: { type: string }
    labelIds:
      type: array
      items: { type: string, minLength: 1 }
    assigneeIds:
      type: array
      items: { type: string, minLength: 1 }
    milestoneId: { type: [string, "null"] }
  additionalProperties: false
output_schema:
  type: object
  required: [id, number, labels, assignees, milestoneNumber]
  properties:
    id: { type: string, minLength: 1 }
    number: { type: integer, minimum: 1 }
    title: { type: string }
    state: { type: string }
    url: { type: string, minLength: 1 }
    labels:
      type: array
      items: { type: string, minLength: 1 }
    assignees:
      type: array
      items: { type: string, minLength: 1 }
    milestoneNumber: { type: [integer, "null"] }
  additionalProperties: false
routing:
  preferred: graphql
  fallbacks: []
composite:
  steps:
    - capability_id: issue.update
      requires_any_of: [title, body]
      params_map:
        issueId: issueId
        title: title
        body: body
    - capability_id: issue.labels.update
      requires_any_of: [labelIds]
      params_map:
        issueId: issueId
        labels: labelIds
    - capability_id: issue.assignees.update
      requires_any_of: [assigneeIds]
      params_map:
        issueId: issueId
        assignees: assigneeIds
    - capability_id: issue.milestone.set
      requires_any_of: [milestoneId]
      params_map:
        issueId: issueId
        milestoneNumber: milestoneId
  output_strategy: merge
