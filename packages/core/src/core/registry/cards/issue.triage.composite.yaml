capability_id: issue.triage.composite
version: "1.0.0"
description: "Set issue labels and create an issue comment in a single GraphQL batch call."
input_schema:
  type: object
  required: [issueId, labelIds, body]
  properties:
    issueId: { type: string, minLength: 1 }
    labelIds:
      type: array
      minItems: 1
      items: { type: string, minLength: 1 }
    body: { type: string, minLength: 1 }
  additionalProperties: false
output_schema:
  type: object
  required: [issueId, commentId, labels, body, url]
  properties:
    issueId: { type: string, minLength: 1 }
    commentId: { type: string, minLength: 1 }
    labels:
      type: array
      items: { type: string, minLength: 1 }
    body: { type: string }
    url: { type: string }
  additionalProperties: false
routing:
  preferred: graphql
  fallbacks: []
composite:
  steps:
    - capability_id: issue.labels.update
      params_map:
        issueId: issueId
        labels: labelIds
    - capability_id: issue.comments.create
      params_map:
        issueId: issueId
        body: body
  output_strategy: merge
